{% extends 'index.html' %}
{% load imagekit %}

{% block content %}
    <section class="box-intro">
        <div class="table-cell text-center">
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            <div class="container-fluid">
                <div class="row mb-50">
                    <div class="col-xs-12">
                        {% if user.profile_pic %}
                            {% thumbnail "300x300" user.profile_pic -- class="img-profile" %}
                        {% endif %}
                        <p class="lead">{{ user.name }}</p>
                    </div>
                </div>
                <div class="row">
                    {% if partner %}
                        <div class="col-xs-4 text-right">
                            {% thumbnail "70x70" user.profile_pic -- class="img-profile" %}
                            <p class="lead">{{ user.name }}</p>
                        </div>
                        <div class="col-xs-4">
                            {% thumbnail "70x70" user.profile_pic -- class="img-profile" %}
                            <p class="lead">{{ user.name }}</p>
                        </div>
                        <div class="col-xs-4 text-left">
                            {% thumbnail "70x70" user.profile_pic -- class="img-profile" %}
                            <p class="lead">{{ user.name }}</p>
                        </div>
                        {# FIXME: 디자이너 피드백 이후 이부분 implement #}
                    {% endif %}
                </div>
            </div>
            {#            <h2>{{ user.name }}님 안녕하세요.</h2>#}
            {#            <br>#}
            {#            <br>#}
            {#            <br>#}
            {#            <div id="coffee" class="btn-group-lg">#}
            {#                <a href="{% url 'meetings:meetings-list' %}" class="btn">모임 보기</a>#}
            {#                <a href="{% url 'cafes:cafes-search' %}" class="btn">커모 열기</a>#}
            {#            </div>#}
            {#            <div id="partner" class="btn-group-lg">#}
            {#                <a href="{% url 'partners:detail' user.id %}" class="btn">짝모 현황</a>#}
            {#                <a href="{% url 'partners:meeting-list' %}" class="btn">짝모 보기</a>#}
            {#                <a href="{% url 'partners:meeting-create' %}" class="btn">짝모 등록</a>#}
            {#            </div>#}
            {#            <br>#}
        </div>
    </section>
    <section class="portfolio">
        <div class="container text-center">
            <div class="row" style="margin-top:20px;">
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-12">
                            <h3> 진행중 커모 </h3>
                            <hr>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            {% for meeting in coffee_meetings %}
                                <div id="div-coffee-meeting" meeting-pk="{{ meeting.pk }}" class="row"
                                     style="height:10%; margin-bottom:20px;">
                                    <div class="col-xs-4">
                                        {% if meeting.photos %}
                                            {#FIXME: 사진이 없을 경우 디폴트 사진 추가 #}
                                            {% thumbnail "100x100" meeting.photos.first.image -- style="width: 100%; max-width: 100px; height: auto;" %}
                                        {% endif %}
                                    </div>
                                    <div class="col-xs-8" style="position:relative;">
                                        <div class="row" style="height: 100%;">
                                            <p class="lead"
                                               style="font-size: calc(1vw + 15px); ">{{ meeting.title }}</p>
                                        </div>
                                        {#                                <div class="row">#}
                                        {#                                    <div class="col-xs-6">#}
                                        {#                                        {{ meeting.cafe.name }}#}
                                        {#                                    </div>#}
                                        {#                                    <div class="col-xs-6">#}
                                        {#                                        {{ meeting.meeting_date | date:"M d일 h시 i분" }}#}
                                        {#                                    </div>#}
                                        {#                                </div>#}
                                        <div class="row" style="margin-top:8%;">
                                            <div class="col-xs-6"
                                                 style="position: absolute; bottom: 0; left: 0;">
                                                <h5 style="font-size: 1vw;">작성자
                                                    &nbsp; {{ meeting.author.name }}</h5>
                                            </div>
                                            <div class="col-xs-6 "
                                                 style="position: absolute; bottom: 0; right: 0;">
                                                <h5 style="font-size: 1vw;">참가자
                                                    &nbsp; {{ meeting.participants.count }}명 </h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-12">
                            <h3> 모임 사진</h3>
                            <hr>
                        </div>
                    </div>
                    <div class="row">
                        {% for photo in latest_photos %}
                            <div class="col-sm-4">
                                {% if photo.file.thumb_url %}
                                    <a href="{% url '' %}">
                                        <img class="img-responsive" src="{{ photo.file.thumb_url }}">
                                    </a>
                                {% else %}
                                    <a href="#">
                                        <img class="img-responsive" src="{{ photo.image.url }}">
                                    </a>
                                {% endif %}
                                {# 3번째 사진마다 div를 닫아주고 새로운 row를 열어준다 #}
                                {% if forloop.counter|divisibleby:3 %}
                                    </div>
                                    <div class="row">
                                {% endif %}
                                </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {#            <div class="row" style="position:relative;">#}
            {#                <div class="col-sm-6">#}
            {#                    {% for meeting in coffee_meetings %}#}
            {#                        <div class="row mb-50">#}
            {#                            <div class="col-xs-4">#}
            {#                                {% if meeting.photos %}#}
            {#FIXME: 사진이 없을 경우 디폴트 사진 추가 #}
            {#                                    {% thumbnail "100x100" meeting.photos.first.image -- style="width: 100%; max-width: 100px; height: auto;"%}#}
            {#                                {% endif %}#}
            {#                            </div>#}
            {#                            <div class="col-xs-8" style="height:100%;">#}
            {#                                <p class="lead" style="top:5%; font-size: 2vw;">{{ meeting.title }}</p>#}
            {#                                <div class="row">#}
            {#                                    <div class="col-xs-6">#}
            {#                                        {{ meeting.cafe.name }}#}
            {#                                    </div>#}
            {#                                    <div class="col-xs-6">#}
            {#                                        {{ meeting.meeting_date | date:"M d일 h시 i분" }}#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                                <div class="row" style="height:50%;">#}
            {#                                    <div class="col-xs-6" style="position: absolute; bottom: 0; left: 0; background-color: red;">#}
            {#                                        <h5 style="font-size: 1vw;">작성자 &nbsp; {{ meeting.author.name }}</h5>#}
            {#                                    </div>#}
            {#                                    <div class="col-xs-6" style="position: absolute; bottom: 0; right: 0; background-color: blue;">#}
            {#                                       <h5 style="font-size: 1vw;">참가자 &nbsp; {{ meeting.participants.count }}명 </h5>#}
            {#                                    </div>#}
            {#                                </div>#}
            {#                            </div>#}
            {#                        </div>#}
            {#                    {% endfor %}#}
            {#                </div>#}
            {#                <div class="col-sm-6" style="; max-width: 45%;">#}
            {#                    {% for photo in latest_photos %}#}
            {#                        {% if photo.file.thumb_url %}#}
            {#                            {% thumbnail "90x90" photo.file -- style="margin:10px; width: 100%; max-width: 100px; height: auto;"%}#}
            {#                        <img src="{{ photo.file.thumb_url }}">#}
            {#                        {% else %}#}
            {#                            {% thumbnail "90x90" photo.image -- style="margin:10px;width: 100%; max-width: 100px; height: auto;"%}#}
            {#                        {% endif %}#}
            {#                    {% endfor %}#}
            {#                </div>#}
        </div>
        </div>
    </section>
{% endblock %}